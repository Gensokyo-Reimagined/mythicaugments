purity_of_murder_damage_cal:
  # cooldown: 1
  Skills:
  # - setVariable{type=FLOAT;d=10;var=caster.purity_currenth;scope=caster;value="(max(1, <caster.hp>))"} @self
  # - setVariable{type=FLOAT;d=10;var=caster.purity_mh;scope=caster;value="(max(1, <caster.mhp>))"} @self
  # - setVariable{type=FLOAT;d=10;var=caster.purity_ratio;scope=caster;value="(<caster.var.purity_currenth> / <caster.var.purity_mh>)"} @self
  # - setVariable{type=FLOAT;d=10;var=caster.purity_ADDITIVE_MULTIPLIER;scope=caster;value="(1 / (<caster.var.purity_ratio> + 0.1))"} @self
  # - setVariable{type=FLOAT;d=10;var=caster.purity_cappedADDITIVE_MULTIPLIER;scope=caster;value="(min(<caster.var.purity_ratio>, 3))"} @self
  # - setVariable{type=INTEGER;d=10;var=caster.purity_damage;scope=caster;value="(<caster.damage> / <caster.var.purity_cappedADDITIVE_MULTIPLIER>)"} @self
  - message{m=<caster.damage>} @self

purity_of_murder_damage:
  Skills:
  - switch{condition=healthpercent{p=<<case>};cases=
        case 0.9=[
          - stataura{s=ATTACK_DAMAGE;type=ADDITIVE_MULTIPLIER;d=2;value="ceil(<caster.damage> * 0.05)"} @self
          ]
        case 0.8=[
          - stataura{s=ATTACK_DAMAGE;type=ADDITIVE_MULTIPLIER;d=2;value="ceil(<caster.damage> * 0.1)"} @self
          ]
        case 0.7=[
          - stataura{s=ATTACK_DAMAGE;type=ADDITIVE_MULTIPLIER;d=2;value="ceil(<caster.damage> * 0.15)"} @self
          ]
        case 0.6=[
          - stataura{s=ATTACK_DAMAGE;type=ADDITIVE_MULTIPLIER;d=2;value="ceil(<caster.damage> * 0.2)"} @self
          ]
        case 0.5=[
          - stataura{s=ATTACK_DAMAGE;type=ADDITIVE_MULTIPLIER;d=2;value="ceil(<caster.damage> * 0.25)"} @self
          ]
        case 0.4=[
          - stataura{s=ATTACK_DAMAGE;type=ADDITIVE_MULTIPLIER;d=2;value="ceil(<caster.damage> * 0.3)"} @self
          - bloodyScreen{duration=100;c=false} @self
          - recoil{r=1;p=-0.25to0.25} @self
          ]
        case 0.3=[
          - stataura{s=ATTACK_DAMAGE;type=ADDITIVE_MULTIPLIER;d=2;value="ceil(<caster.damage> * 0.35)"} @self
          - bloodyScreen{duration=100;c=false} @self
          - recoil{r=1;p=-0.27to0.27} @self
          ]
        case 0.2=[
          - stataura{s=ATTACK_DAMAGE;type=ADDITIVE_MULTIPLIER;d=2;value="ceil(<caster.damage> * 0.4)"} @self
          - bloodyScreen{duration=100;c=false} @self
          - recoil{r=1;p=-0.3to0.3} @self
          ]
        case 0.1=[
          - stataura{s=ATTACK_DAMAGE;type=ADDITIVE_MULTIPLIER;d=2;value="ceil(<caster.damage> * 0.45)"} @self
          - bloodyScreen{duration=100;c=false} @self
          - recoil{r=1;p=-0.35to0.35} @self
          ]
        case 0.05=[
          - stataura{s=ATTACK_DAMAGE;type=ADDITIVE_MULTIPLIER;d=2;value="ceil(<caster.damage> * 0.5)"} @self
          - bloodyScreen{duration=100;c=false} @self
          - recoil{r=1;p=-0.4to0.4} @self
          ]
        case DEFAULT=[
          ]
      } @self

  # - setVariable{type=FLOAT;d=10;var=caster.purity_currenth;scope=caster;value="(max(1, <caster.hp>))"} @self
  # - setVariable{type=FLOAT;d=10;var=caster.purity_mh;scope=caster;value="(max(1, <caster.mhp>))"} @self
  # - setVariable{type=FLOAT;d=10;var=caster.purity_ratio;scope=caster;value="(<caster.var.purity_currenth> / <caster.var.purity_mh>)"} @self
  # - setVariable{type=FLOAT;d=10;var=caster.purity_ADDITIVE_MULTIPLIER;scope=caster;value="(1 / (<caster.var.purity_ratio> + 0.1))"} @self
  # - setVariable{type=FLOAT;d=10;var=caster.purity_cappedADDITIVE_MULTIPLIER;scope=caster;value="(min(<caster.var.purity_ratio>, 3))"} @self
  # - setVariable{type=INTEGER;d=10;var=caster.purity_damage;scope=caster;value="(ceil(<caster.damage> / <caster.var.purity_cappedADDITIVE_MULTIPLIER>))"} @self
  # - stataura{s=ATTACK_DAMAGE;type=ADDITIVE_MULTIPLIER;d=20;value="<caster.var.purity_damage>"} @self
  # - message{m=<caster.damage>} @self

wind_serpent_scale_speed:
  Skills:
  - potion{type=SPEED;duration=300;level=2;p=false} @self
  - particle{spread=0.4;size=1;p=happy_villager;a=20} @self
  - sound{s=entity.frog.ambient} @selfEyeLocation
  - potion{type=SPEED;duration=300;level=2;p=false} @playersInRadius{r=8}
  - particle{spread=0.4;size=1;p=happy_villager;a=20} @playersInRadius{r=8;yo=0.2}
  - setItemGroupCooldown{t=900;k=windserpentscale}

spiritual_gourd_regen:
  Skills:
  - potion{type=REGENERATION;duration=600;level=1;p=false} @self
  - particle{spread=1;size=1;p=soul_fire_flame;a=30} @self
  - sound{s=entity.witch.drink} @selfEyeLocation
  - setItemGroupCooldown{t=600;k=spiritualgourd}

hakurei_border_dew_haste:
  Skills:
  - potion{type=HASTE;duration=300;level=2;p=false} @self
  - particle{spread=0.4;size=1;p=instant_effect;a=40} @self
  - sound{s=entity.frog.ambient} @selfEyeLocation
  - potion{type=HASTE;duration=300;level=2;p=false} @playersInRadius{r=8}
  - particle{spread=0.4;size=1;p=instant_effect;a=40} @playersInRadius{r=8;yo=0.2}
  - setItemGroupCooldown{t=900;k=hakureiborderdew}

misfortune_of_paradise_haste:
  Skills:
  - potion{type=HASTE;duration=600;level=1;p=false} @self
  - particle{spread=0.4;size=1;p=large_smoke;a=40} @self
  - sound{s=block.fire.extinguish} @selfEyeLocation
  - setItemGroupCooldown{t=600;k=misfortuneofparadise}

buddha_motorcycle_keys_strength:
  Skills:
  - potion{type=STRENGTH;duration=600;level=1;p=false} @self
  - particle{spread=1;size=1;p=smoke_normal;a=30} @self
  - sound{s=sfx.generic_hit_metallic} @selfEyeLocation
  - setItemGroupCooldown{t=600;k=buddhamotorcyclekeys}

moriya_wind_ofuda_speed:
  Skills:
  - potion{type=SPEED;duration=600;level=2;p=false} @self
  - particle{spread=1;size=1;p=happy_villager;a=20} @self
  - sound{s=entity.frog.ambient} @selfEyeLocation
  - setItemGroupCooldown{t=600;k=moriyawindofuda}

warp_dial_tp:
  Skills:
  - raytrace{
      locationSkill=[
        - particles{p=flame;a=20;s=0.2;hS=0.1;vS=0.1}
        - tp
        - sound{s=block.note_block.bell}
      ];md=32;
      } @targetlocation ~onUse

  - setItemGroupCooldown{t=60;k=warpdial}

hourai_watch_speed:
  Skills:
  - potion{type=SPEED;duration=80;level=9;p=false} @self
  - particle{spread=1;size=1;p=happy_villager;a=20} @self
  - sound{s=item.mace.smash_ground} @selfEyeLocation
  - onattack{cancelevent=true;d=80;i=1}
  - setItemGroupCooldown{t=20;k=houraiwatch}

oni_cup_drink:
  Skills:
  - stataura{s=ATTACK_DAMAGE;type=COMPOUND_MULTIPLIER;d=160;value="ceil(<caster.damage> / 2)";i=1;ot=[ - particle{spread=1;size=1;p=flame;a=6} @self ]} @self
  - particle{spread=1;size=1;p=flame;a=20} @self
  - sound{s=item.mace.smash_ground} @selfEyeLocation
  - setItemGroupCooldown{t=400;k=onicup}

steel_magatama_absorption:
  Skills:
  - potion{type=ABSORPTION;duration=200;level=9;p=false} @self
  - particle{spread=1;size=1;p=trial_spawner_detection;a=20} @self
  - sound{s=block.trial_spawner.ambient} @selfEyeLocation
  - setItemGroupCooldown{t=500;k=steelmagatama}